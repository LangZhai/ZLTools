/**
 * ZLTools
 * Date: 2017-06-02
 * © 2016-2017 LangZhai(智能小菜菜)
 * This is licensed under the GNU LGPL, version 3 or later.
 * For details, see: http://www.gnu.org/licenses/lgpl.html
 * Project home: https://github.com/LangZhai/ZLTools
 */
var params={};location.search.substr(1).split("&").forEach(function(t){var e=t.split("=");params[decodeURIComponent(e[0])]=decodeURIComponent(e[1])}),Object.extend=function(){var t,e;return"boolean"==typeof arguments[0]?(t=[].slice.call(arguments,1),e=arguments[0]):t=[].slice.call(arguments),t.forEach(function(n){if(n instanceof Object)for(var o in n)n.hasOwnProperty(o)&&(t[0][o]=e?Object.extend(e,{},n[o]):n[o]);else t[0]=n}),t[0]},Object.getVal=function(t,e){return e.split(".").some(function(e){return void 0===(t=t[e])}),t},Object.setVal=function(t,e,n){e=e.split("."),e.forEach(function(o,i){return i===e.length-1?void(t[o]="function"==typeof n?n(t[o]):n):(void 0===t[o]&&(t[o]={}),void(t=t[o]))})},Object.encodeEntity=function(t){if(t instanceof Object){t=Object.extend(t instanceof Array?[]:{},t);for(var e in t)t.hasOwnProperty(e)&&(t[e]=Object.encodeEntity(t[e]))}else"string"==typeof t&&(t=t.replaceAll(/&(?!(\S(?!&))+;)/,"&amp;").replaceAll(">","&gt;").replaceAll("<","&lt;").replaceAll('"',"&quot;").replaceAll("'","&#39;"));return t},Object.decodeEntity=function(t){if(t instanceof Object){t=Object.extend(t instanceof Array?[]:{},t);for(var e in t)t.hasOwnProperty(e)&&(t[e]=Object.decodeEntity(t[e]))}else"string"==typeof t&&(t=t.replaceAll("&amp;","&").replaceAll("&gt;",">").replaceAll("&lt;","<").replaceAll("&quot;",'"').replaceAll("&#39;","'"));return t},Math.round2=function(t,e){return Math.round(t*Math.pow(10,e))/Math.pow(10,e)},String.prototype.replaceAll=function(t,e,n){return RegExp.prototype.isPrototypeOf(t)?this.replace(t,e):this.replace(new RegExp(t,n?"gi":"g"),e)},function(){var t=function(e){return new t.prototype.init(e)};t.prototype.init=function(t){if("string"==typeof t){var e=document.querySelectorAll(t);return Object.extend(this,e),this.length=e.length,this}return t.nodeType?(this[0]=t,this.length=1,this):t},t.prototype.serializeObject=function(){var t={},e=function(e,n){void 0!==t[e]?(!t[e]instanceof Array&&(t[e]=[t[e]]),t[e].push(n)):t[e]=n};return Array.prototype.forEach.call(this[0].elements,function(t){if(t.name)switch(t.type){case"select-one":case"select-multiple":Array.prototype.forEach.call(t.options,function(n){n.selected&&e(t.name,n.hasAttribute("value")?n.value:n.text)});break;case void 0:case"file":case"submit":case"reset":case"button":break;case"radio":case"checkbox":if(!t.checked)break;default:e(t.name,t.value)}}),t},t.prototype.anchor=function(e){var n,o=this[0].dataset.id||(new Date).getTime(),i={position:getComputedStyle(this[0]).getPropertyValue("position"),display:getComputedStyle(this[0]).getPropertyValue("display"),top:getComputedStyle(this[0]).getPropertyValue("top")},r=function(t){var e=t.getBoundingClientRect();return{top:e.top+pageYOffset,height:e.height}};return this[0].dataset.id=o,e=e||{},e.anchor=(e.anchor?e.anchor instanceof t?e.anchor:t(e.anchor):this)[0],n=r(e.anchor),window["anchor"+o]||(window["anchor"+o]=function(){return window.innerHeight-n.height>0&&pageYOffset>n.top+(e.isBottom?n.height:0)?this.dataset.anchor||(this.style.position="fixed",this.style.display="block",this.style.top=0,this.dataset.anchor=!0):this.dataset.anchor&&(this.style.position=i.position,this.style.display=i.display,this.style.top=i.top,this.dataset.anchor=!1,n=r(e.anchor)),arguments.callee}.bind([this[0]])(),window.addEventListener("scroll",window["anchor"+o]),window.addEventListener("resize",window["anchor"+o])),this},t.prototype.boxCut=function(t){return Array.prototype.forEach.call(this,function(){var e=this.dataset.id||(new Date).getTime();this.dataset.text=this.textContent,this.dataset.id=e,window["boxCut"+e]||(window["boxCut"+e]=function(){if(this.textContent=this.dataset.text,this.getBoundingClientRect().height>t){do this.textContent=this.textContent.substring(0,this.textContent.length-1);while(this.getBoundingClientRect().height>t);this.textContent=this.textContent.substring(0,this.textContent.length-2)+"…"}return arguments.callee}.bind(this)(),window.addEventListener("scroll",window["boxCut"+e]))}),this},t.prototype.init.prototype=t.prototype,window.ZLTools=t}();