/**
 * ZLTools
 * Date: 2017-06-02
 * © 2016-2017 LangZhai(智能小菜菜)
 * This is licensed under the GNU LGPL, version 3 or later.
 * For details, see: http://www.gnu.org/licenses/lgpl.html
 * Project home: https://github.com/LangZhai/ZLTools
 */
var params={};location.search.substr(1).split("&").forEach(function(t){var e=t.split("=");params[decodeURIComponent(e[0])]=decodeURIComponent(e[1])}),Object.extend=function(){var t,e;return"boolean"==typeof arguments[0]?(t=[].slice.call(arguments,1),e=arguments[0]):t=[].slice.call(arguments),t.forEach(function(n){if(n instanceof Object)for(var o in n)n.hasOwnProperty(o)&&(t[0][o]=e?Object.extend(e,{},n[o]):n[o]);else t[0]=n}),t[0]},Object.getVal=function(t,e){return e.split(".").some(function(e){return void 0===(t=t[e])}),t},Object.setVal=function(t,e,n){e=e.split("."),e.forEach(function(o,r){return r===e.length-1?void(t[o]="function"==typeof n?n(t[o]):n):(void 0===t[o]&&(t[o]={}),void(t=t[o]))})},Object.encodeEntity=function(t){if(t instanceof Object){t=Object.extend(t instanceof Array?[]:{},t);for(var e in t)t.hasOwnProperty(e)&&(t[e]=Object.encodeEntity(t[e]))}else"string"==typeof t&&(t=t.replaceAll(/&(?!(\S(?!&))+;)/,"&amp;").replaceAll(">","&gt;").replaceAll("<","&lt;").replaceAll('"',"&quot;").replaceAll("'","&#39;"));return t},Object.decodeEntity=function(t){if(t instanceof Object){t=Object.extend(t instanceof Array?[]:{},t);for(var e in t)t.hasOwnProperty(e)&&(t[e]=Object.decodeEntity(t[e]))}else"string"==typeof t&&(t=t.replaceAll("&amp;","&").replaceAll("&gt;",">").replaceAll("&lt;","<").replaceAll("&quot;",'"').replaceAll("&#39;","'"));return t},Math.round2=function(t,e){return Math.round(t*Math.pow(10,e))/Math.pow(10,e)},String.prototype.replaceAll=function(t,e,n){return RegExp.prototype.isPrototypeOf(t)?this.replace(t,e):this.replace(new RegExp(t,n?"gi":"g"),e)},function(){var t=function(e){return new t.prototype.init(e)};t.prototype.init=function(t){if("string"==typeof t){var e=document.querySelectorAll(t);return Object.extend(this,e),this.length=e.length,this}return t.nodeType?(this[0]=t,this.length=1,this):t},t.prototype.serializeObject=function(){var t={},e=function(e,n){void 0!==t[e]?(!t[e]instanceof Array&&(t[e]=[t[e]]),t[e].push(n)):t[e]=n};return Array.prototype.forEach.call(this[0].elements,function(t){if(t.name)switch(t.type){case"select-one":case"select-multiple":Array.prototype.forEach.call(t.options,function(n){n.selected&&e(t.name,n.hasAttribute("value")?n.value:n.text)});break;case void 0:case"file":case"submit":case"reset":case"button":break;case"radio":case"checkbox":if(!t.checked)break;default:e(t.name,t.value)}}),t},t.prototype.anchor=function(e){var n,o=this[0],r=o.dataset.id||(new Date).getTime(),i={position:getComputedStyle(o).getPropertyValue("position"),display:getComputedStyle(o).getPropertyValue("display"),top:getComputedStyle(o).getPropertyValue("top")},a=function(t){var e=t.getBoundingClientRect();return{top:e.top+pageYOffset,height:e.height}};return o.dataset.id=r,o.dataset.anchor=!1,e=e||{},e.anchor=(e.anchor?e.anchor instanceof t?e.anchor:t(e.anchor):this)[0],n=a(e.anchor),window["anchor"+r]&&(window.removeEventListener("scroll",window["anchor"+r]),window.removeEventListener("resize",window["anchor"+r])),window["anchor"+r]=function(){return window.innerHeight-n.height>0&&pageYOffset>n.top+(e.isBottom?n.height:0)?"false"===o.dataset.anchor&&(o.style.position="fixed",o.style.display="block",o.style.top=0,o.dataset.anchor=!0):"true"===o.dataset.anchor&&(o.style.position=i.position,o.style.display=i.display,o.style.top=i.top,o.dataset.anchor=!1,n=a(e.anchor)),arguments.callee}(),window.addEventListener("scroll",window["anchor"+r]),window.addEventListener("resize",window["anchor"+r]),this},t.prototype.boxCut=function(t){return Array.prototype.forEach.call(this,function(e,n){var o=e.dataset.id||(new Date).getTime()+"_"+n;e.dataset.text=e.textContent,e.dataset.id=o,window["boxCut"+o]&&window.removeEventListener("resize",window["boxCut"+o]),window["boxCut"+o]=function(){if(e.textContent=e.dataset.text,e.getBoundingClientRect().height>t){do e.textContent=e.textContent.substring(0,e.textContent.length-1);while(e.getBoundingClientRect().height>t);e.textContent=e.textContent.substring(0,e.textContent.length-2)+"…"}return arguments.callee}(),window.addEventListener("resize",window["boxCut"+o])}),this},t.prototype.init.prototype=t.prototype,window.ZLTools=t}();